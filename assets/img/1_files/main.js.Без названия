"use strict";(self.webpackChunkhexlet_ide=self.webpackChunkhexlet_ide||[]).push([[179],{99644:(e,t,n)=>{var r={};n.r(r),n.d(r,{getDirectoryChildren:()=>ln,getFullTree:()=>sn,getInitialTree:()=>cn,openFile:()=>fn,openFiles:()=>un,reloadImage:()=>gn,runLintProgress:()=>bn,runLintSuccess:()=>yn,runTestsProgress:()=>vn,runTestsSuccess:()=>wn,updateFilesTree:()=>hn,updateTerminal:()=>pn,writeFile:()=>dn,writeToTerminal:()=>mn}),n(28594),n(35666),n(77090),n(30837),n(85241);var a=n(28227),i=n(67294),o=n(73935),c=n(49226),s=n(48594),l=n(82492),u=n.n(l),f=n(50308);const d={artifactsDir:"artifacts",terminal:{cols:110,rows:8},autosaveInterval:2e3,rpc:{url:"",options:{path:"socket.io",reconnectionDelay:2e3,reconnectionDelayMax:3e3,reconnection:!0,autoConnect:!0,transports:["websocket"]},events:{connect:f,error:f,disconnect:f,reconnect:f,reconnecting:f,reconnect_error:f,reconnect_failed:f,"fs.add":f,"fs.unlink":f,"fs.change":f,"fs.addDir":f,"fs.unlinkDir":f,"run.progress":f,"run.finish":f,"terminal.updated":f}}};var m=n(77407);const p=function(e,t){var n=t.preloadedState,r=t.extraArgument,a=(0,m.Bx)({thunk:{extraArgument:r}});return(0,m.xC)({preloadedState:n,reducer:e,middleware:a})};var v=n(90589),b=n(68718),y={resources:{en:{translation:{sendToCodeReview:"Send to code review",linkToCodeReview:"Go to code review",disabledSendToCodeReviewInfo:"You can send a code review after running tests",finishExercise:"Finish",finishExerciseInfo:"Completion of the exercise will be available after successfully passing the tests.",linterPassed:"Linter passed",infinityLoop:"Code has been running for too long. Infinite loop or recursion. Check terminating conditions.",linterFailed:"Check your code. Linter failed.",testsTerminated:"Code has been running for too long. Infinite loop or recursion. Check terminating conditions.",testsRun:"Run tests",tabSelectNext:"Next tab",tabSelectPrev:"Previous tab",hotkeys:"Hotkeys",focusTerminal:"Switch to terminal",closeTab:"Close tab",insertLine:"Insert new line",moveLineUp:"Move line up",moveLineDown:"Move line down",copyPasteLine:"Copy line and paste it",indentLine:"Indent line by one indent unit",dedentLine:"Dedent line by one indent unit",find:"Find",findNext:"Find next",replace:"Replace",replaceAll:"Replace all"}},ru:{translation:{forceDisconnected:"Кажется кто-то открыл редактор в другом месте. Тикаем!",reconnecting:"Пытаюсь достучаться до сервера. Моя попытка номер {{count}}",testsFailed:"Тесты завершились с ошибками. Изучите их вывод. Вдохните. Выдохните. Исправьте код.",sendToCodeReview:"Отправить на ревью",linkToCodeReview:"Посмотреть ревью",disabledSendToCodeReviewInfo:"Отправить код на ревью можно после запуска тестов. Чтобы было что смотреть.",finishExercise:"Завершить",finishExerciseInfo:"Завершение упражнения будет доступно после успешного прохождения тестов",testsPassed:"Тесты прошли!",linterPassed:"Проверка линтером завершена. Стилистических ошибок не найдено.",infinityLoop:"Ваш код работал слишком долго и был остановлен. Проверьте условия выхода из циклов.",linterFailed:"Исправьте ошибки линтера. Он любит чистоту.",testsTerminated:"Упс, что то пошло не так, код работал слишком долго и был остановлен. Проверьте условия выхода из циклов.",testsRun:"Запустить тесты",tabSelectNext:"Следующая вкладка",tabSelectPrev:"Предыдущая вкладка",hotkeys:"Горячие  клавиши",focusTerminal:"Переключиться в терминал",closeTab:"Закрыть вкладку",insertLine:"Вставить строку",moveLineUp:"Переместить строку вверх",moveLineDown:"Переместить строку вниз",copyPasteLine:"Дублировать строку",indentLine:"Сдвинуть строки вправо",dedentLine:"Сдвинуть строки влево",find:"Найти",findNext:"Найти следующее совпадение",replace:"Заменить",replaceAll:"Заменить все"}}},lng:"ru",keySeparator:!1,interpolation:{escapeValue:!1}};const h=function(e){var t=l(y,e);v.Z.use(b.Db).init(t)};var g=n(78947),w=n(51436);const E=function(){g.vI.add(w.UO1,w.Pk,w.cC_,w.gMD,w.V9J,w.sph,w.NBC,w.RLE,w.f8k)};var O=n(63274),T=n(23998);const x=function(){return i.createElement("div",{className:"text-success d-flex h-100"},i.createElement("div",{className:"align-self-center m-auto"},i.createElement("div",{className:"spinner-border",role:"status",style:{width:"5rem",height:"5rem"}},i.createElement("span",{className:"visually-hidden"},"Loading..."))))};var k=n(24350),j=n.n(k),P=n(67814),S=n(84873),C=n(89734),R=n.n(C),D=n(94184),F=n.n(D),A=n(27361),I=n(10928),N=n.n(I);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=(0,m.oM)({name:"output",initialState:{exit:null,data:[],testsRunningState:"none",exerciseFinishingState:"disabled",codeReviewState:"disabled",codeReviewUrl:null},reducers:{runTestsSuccess:function(e,t){var n=t.payload.exit;Object.assign(e,{exit:n,testsRunningState:"finished",canFinishExercise:"normal"===n,codeReviewState:"enabled"})},runTestsRequest:function(e){Object.assign(e,{testsRunningState:"running",data:[],codeReviewState:"disabled"})},sendCodeToReviewRequest:function(e){e.codeReviewState="sending"},finishExerciseRequest:function(e){e.exerciseFinishingState="processing"},addTestsResultProgress:function(e,t){var n=t.payload;e.data.push(n)},finishCodeReviewCreating:function(e,t){var n=t.payload.url;Object.assign(e,{codeReviewUrl:n,codeReviewState:"created"})}}}),q=L(L({},_.actions),{},{finishExercise:function(){return function(e,t,n){n.callbacks.finishExercise()}},sendToCodeReview:function(){return function(e,t,n){var r=n.callbacks;e((0,_.actions.sendCodeToReviewRequest)()),r.sendToCodeReview()}},runTests:function(){return function(e,t,n){var r=n.requests;e(_.actions.runTestsRequest()),r.runTests()}}});const M=_.reducer;var B=function(e,t){return e.find((function(e){return e.file.id===t}))},U=function(e){return{file:e,id:e.id,dirtyAt:(new Date).getTime(),lastSavedAt:(new Date).getTime(),dirty:!1}},z=function(e,t){if(!B(e.fileInfos,t.id)){var n=U(t);e.fileInfos.push(n)}},G=(0,m.oM)({name:"files",initialState:{fileInfos:[U({id:"readme"}),U({id:"output"})]},reducers:{openFiles:function(e,t){t.payload.files.forEach((function(t){return z(e,t)}))},openFile:function(e,t){var n=t.payload.file;z(e,n)},editFile:function(e,t){var n=t.payload,r=e.fileInfos,a=n.id,i=n.content,o=B(r,a);o.file.content=i,o.dirtyAt=(new Date).getTime(),o.dirty=o.dirtyAt>o.lastSavedAt},saveFile:function(e,t){var n=t.payload,r=e.fileInfos,a=n.id,i=n.lastSavedAt,o=B(r,a);o.lastSavedAt=i,o.dirty=o.dirtyAt>o.lastSavedAt},closeFile:function(e,t){var n=t.payload.file;e.fileInfos=e.fileInfos.filter((function(e){return e.file.id!==n.id}))},reloadImage:function(e,t){var n=t.payload.path,r=e.fileInfos.find((function(e){var t=e.file;return(null==t?void 0:t.path)&&t.path===n}));r&&(r.file.imageHash=Date.now())}}}),$=G.actions;const H=G.reducer;function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){J(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Q=function(e){return String(e.id)},Y=function(e){return{file:e,key:Q(e),name:e.name,closable:!0,type:"text",mime:e.mime,focusesCount:1}},X=function(e,t){return e.find((function(e){return e.key===t}))},ee=(0,m.oM)({name:"fileTabsInfo",initialState:{currentFile:{},activeTabKey:"readme",tabs:[{key:"readme",type:"readme",name:"README",mime:"readme",closable:!1},{key:"output",mime:"output",name:"OUTPUT",type:"output",closable:!1}]},reducers:{selectActiveFileTab:function(e,t){var n=t.payload.key;e.activeTabKey=n,X(e.tabs,n).focusesCount+=1}},extraReducers:function(e){e.addCase(q.runTestsRequest,(function(e){e.activeTabKey="output"})).addCase($.openFiles,(function(e,t){t.payload.files.forEach((function(t){return function(e,t){if(!X(e.tabs,Q(t))){var n=Y(t);e.tabs.push(n)}}(e,t)}))})).addCase($.openFile,(function(e,t){var n=t.payload,r=e.tabs,a=n.file,i=X(r,Q(a));if(i)e.activeTabKey=i.key;else{var o=Y(a);e.tabs.push(o),e.activeTabKey=o.key}})).addCase($.closeFile,(function(e,t){var n=t.payload,r=e.activeTabKey,a=n.file,i=Q(a),o=e.tabs.findIndex((function(e){return e.key===i}));if(e.tabs=e.tabs.filter((function(e){return e.key!==i})),r===i){var c=A(e.tabs,o,I(e.tabs));c.focusesCount+=1,e.activeTabKey=c.key}}))}}),te=function(e){return function(){return function(t,n){var r=n().fileTabsInfo,a=r.tabs,i=r.activeTabKey,o=a.findIndex((function(e){return e.key===i})),c=a[(a.length+o+("next"===e?1:-1))%a.length].key;t(ee.actions.selectActiveFileTab({key:c}))}}},ne=te("next"),re=te("prev"),ae=W(W({},ee.actions),{},{selectNextFileTab:ne,selectPrevFileTab:re});const ie=ee.reducer,oe=function(e){var t=e.onSelectFile,n=e.tab,r=e.file,a=e.activeTabKey,o=F()({"tree-btn":!0,active:a===Q(r)});return i.createElement("div",{className:"tree-item pb-1"},i.createElement("button",{className:o,type:"button",onClick:function(e){t(e,r,n)},"data-name":r.name},i.createElement(P.G,{icon:"file",className:"fa-w-20 px-1"}),i.createElement("span",null,r.name)))};var ce=["tabsByKey","level"];function se(){return(se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var le=["__pycache__"];const ue=function e(t){var n=t.tree.name;if(le.includes(n))return null;var r=t.tree,a=t.directoriesState;if(r.readonly)return null;var o,c,s=R()(r.children,["type","name"]).filter((function(e){return!e.name.startsWith(".")})),l=a[r.relativePath]||r.state,u="opened"===l,f="tree-".concat(l),d=F()((!0,(c=f)in(o={"tree-item":!0})?Object.defineProperty(o,c,{value:true,enumerable:!0,configurable:!0,writable:!0}):o[c]=true,o));return i.createElement("div",{className:d},i.createElement("button",{className:"tree-btn pb-1",onClick:function(e){var n=t.tree;(0,t.toggleDirectory)(e,n)},type:"button","data-name":r.name},i.createElement(P.G,{icon:u?"folder-open":"folder",className:"me-1 file-tree-directory"}),i.createElement("span",{"data-name":r.name},r.name)),function(n,r){if(!r||!n)return null;var a=t.tabsByKey,o=t.level,c=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(t,ce),s=F()({"tree-branch-children":!0,"hidden-md-up":!n,"hidden-md-down":!n});return i.createElement("div",{className:s,role:"group"},r.map((function(t){switch(t.type){case"directory":return i.createElement(e,se({},c,{level:o+1,key:"tree_".concat(t.id),tree:t,tabsByKey:a}));case"file":var n=a[Q(t)];return i.createElement(oe,se({},c,{level:o+1,key:"leaf_".concat(t.id),file:t,tab:n}));default:throw new Error("Unkown file.type: '".concat(t.type,"'"))}})))}(u,s))};var fe=n(97779),de=(0,m.oM)({name:"ide",initialState:{focusedArea:"fileTabsBox",filesToOpen:[],connected:!1,readme:"",terminalTabsView:"normal",loaded:!1,forceDisconnected:!1,disconnectedAt:null,connectionAttemptsCount:0},reducers:{addReadme:f,openFile:function(e){e.focusedArea="fileTabsBox"},setFocusOnArea:function(e,t){var n=t.payload;e.focusedArea=n.areaName},toggleTerminalTabsBoxView:function(e){var t="normal"===e.terminalTabsView?"hidden":"normal";e.terminalTabsView=t},connectIde:function(e){e.connected=!0,e.loaded=!0,e.connectionAttemptsCount=0},disconnectIde:function(e){e.connected=!1,e.disconnectedAt=(new Date).getTime(),e.connectionAttemptsCount=1},onManualReconnect:function(e){e.connectionAttemptsCount=1},forceDisconnect:function(e){e.connected=!1,e.forceDisconnected=!0,e.disconnectedAt=(new Date).getTime()},reconnectAttempt:function(e){e.connectionAttemptsCount+=1,e.connected=!1}}}),me=de.actions;const pe=de.reducer;var ve=n(92742),be=n(44908),ye=n(26470),he=(0,m.oM)({name:"directoriesState",initialState:{app:"opened"},reducers:{toggleDirectory:function(e,t){var n=t.payload.directory,r=e[n.relativePath]||"closed";e[n.relativePath]="opened"===r?"closed":"opened"}},extraReducers:function(e){e.addCase($.openFiles,(function(e,t){var n=t.payload.files.flatMap((function(e){var t,n,r;return t=e.relativePath,n=ye.dirname(t),(r=ve(n,"/").split("/")).map((function(e,t){return r.slice(0,t+1).join("/")}))}));be(n).forEach((function(t){e[t]="opened"}))}))}}),ge=he.actions;const we=he.reducer;var Ee=n(8804),Oe=n(95659),Te=n(71843),xe=n(70735);function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){Pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Se=function e(t,n){var r;if(t.path===n)return t;var a=t.path,i=n.replace(a,""),o=[a,Ee(Oe(i,"/").split("/"))].join("/"),c=null===(r=t.children)||void 0===r?void 0:r.find((function(e){return"directory"===e.type&&e.path===o}));return void 0===c?null:e(c,n)},Ce=(0,m.oM)({name:"filesTree",initialState:{tree:null},reducers:{refreshFilesTree:function(e,t){var n=t.payload.tree;e.tree=n},updateDirectory:function(e,t){var n,r,a,i,o=t.payload,c=o.dirPath,s=o.children,l=Se(e.tree,c);if(l)return"notRevealed"===l.state?(l.state="revealed",void(l.children=s)):void(l.children=(n=l.children,r=s,a=Te(n,r,"path"),i=xe(r,n,"path"),a.concat(i)))}}}),Re=je(je({},Ce.actions),{},{selectFile:function(e){var t=e.file,n=e.tab;return function(e,r,a){var i=a.requests;if(n){var o=Q(t);e(ae.selectActiveFileTab({key:o}))}else i.openFile(t.path)}},requestGetFullTree:function(){return function(e,t,n){n.requests.getFullTree()}},fetchDirectory:function(e){var t=e.path;return function(e,n,r){r.requests.getDirectoryChildren(t)}}});const De=Ce.reducer;function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ie=(0,m.oM)({name:"terminalTabsBox",initialState:{activeTabKey:"linter"},reducers:{selectActiveTerminalTab:function(e,t){var n=t.payload;e.activeTabKey=n}}}),Ne=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){Ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Ie.actions);const Ke=Ie.reducer;function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){_e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qe=(0,m.oM)({name:"linter",initialState:{exit:null,data:"",state:"none"},reducers:{runLintSuccess:function(e,t){var n=t.payload;Object.assign(e,Ze(Ze({},n),{},{state:"finished"}))},runLintRequest:function(e){e.data="",e.state="running"},addLintResultProgress:function(e,t){var n=t.payload;e.data+=n}}}),Me=qe.actions;const Be=qe.reducer;var Ue=(0,m.oM)({name:"terminals",initialState:{terminal1:{data:[]},terminal2:{data:[]},repl:{data:[]}},reducers:{updateTerminal:function(e,t){var n=t.payload,r=n.id,a=n.data;e[r].data.push(a)},writeToTerminal:function(){}}}),ze=Ue.actions;const Ge=Ue.reducer;function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(n),!0).forEach((function(t){Ve(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const We=(0,fe.UY)({ide:pe,directoriesState:we,filesTree:De,terminalTabsInfo:Ke,fileTabsInfo:ie,files:H,linter:Be,tests:M,terminals:Ge});var Je=He(He(He(He(He(He(He(He(He({},me),Me),ae),$),ge),Re),Ne),q),ze);const Qe=function(){var e=(0,c.I0)(),t=(0,c.v9)((function(e){return{filesTree:e.filesTree.tree,directoriesState:e.directoriesState,activeTabKey:e.fileTabsInfo.activeTabKey,tabsByKey:j()(e.fileTabsInfo.tabs,"key")}})),n=t.filesTree,r=t.directoriesState,a=t.activeTabKey,o=t.tabsByKey;return i.createElement("div",{onFocus:function(){e(Je.setFocusOnArea({areaName:"filesTreeBox"}))},className:"col-2 hexlet-ide-files-tree border border-dark overflow-auto text-nowrap ps-1 pt-1 pe-0"},i.createElement("div",{className:"d-flex"},i.createElement("span",{className:"me-auto text-secondary"},"/usr/src"),i.createElement(S.Z,{onClick:function(t){t.preventDefault(),e(Je.requestGetFullTree())}},i.createElement(P.G,{icon:"sync",className:"me-2"}))),i.createElement("div",{className:"tree"},n&&i.createElement(ue,{activeTabKey:a,key:"tree_".concat(n.id),tree:n,tabsByKey:o,directoriesState:r,toggleDirectory:function(t,n){t.preventDefault();var a="opened"===r[n.relativePath],i="revealed"===n.state;e(Je.toggleDirectory({directory:n})),a||i||e(Je.fetchDirectory({path:n.path}))},onSelectFile:function(t,n,r){t.preventDefault(),e(Je.selectFile({file:n,tab:r}))}})))};var Ye=n(23499),Xe=n(35161),et=n.n(Xe),tt=n(14042),nt=n(86706),rt=n(19611),at=n(94737),it=n(39560),ot=n(39834);const ct=function(){var e=(0,c.v9)((function(e){var t=e.ide;return{connected:t.connected,forceDisconnected:t.forceDisconnected,connectionAttemptsCount:t.connectionAttemptsCount}})),t=e.connected,n=e.forceDisconnected,r=e.connectionAttemptsCount,a=(0,Ye.$)().t;return t?null:i.createElement("div",{className:"reconnection-status-bar disconnected"},i.createElement("span",null,i.createElement(P.G,{icon:"crutch",className:"me-2"}),n?i.createElement("span",null,a("forceDisconnected")):a("reconnecting",{count:r})))};var st=n(34431),lt=n.n(st);const ut=i.createContext(null);var ft=new(lt()),dt=function(e){var t=e.isReviewable,n=e.codeReviewState,r=e.codeReviewUrl,a=(0,Ye.$)().t,o=(0,c.I0)();if(!t)return null;if("created"===n)return i.createElement("a",{href:r,className:"btn btn-info me-2",rel:"noopener noreferrer",target:"_blank"},a("linkToCodeReview"));var s="sending"===n,l=function(e){return"disabled"===e}(n),u=function(e){return"enabled"===e}(n),f=F()({"btn me-2 text-nowrap":!0,"btn-outline-primary":l,"btn-primary":u||s});return i.createElement("button",{type:"button",disabled:l||s,className:f,title:a("disabledSendToCodeReviewInfo"),onClick:function(){o(Je.sendToCodeReview())}},s&&i.createElement("span",{className:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"}),a("sendToCodeReview"))},mt=function(e){var t=e.canFinishExercise,n=(0,Ye.$)().t,r=(0,c.I0)(),a=F()("btn",{"btn-outline-success":!t,"btn-success":t});return i.createElement("button",{type:"button",disabled:!t,className:a,title:n("finishExerciseInfo"),onClick:function(){r(Je.finishExercise())}},n("finishExercise"))},pt=function(e){var t=e.testsRunningState,n=e.exit,r=(0,Ye.$)().t;if("finished"!==t)return null;var a,o,c={terminated:"warning",error:"danger",normal:"success"}[n],s=F()("my-auto me-2",(a={},!0,(o="text-".concat(c))in a?Object.defineProperty(a,o,{value:true,enumerable:!0,configurable:!0,writable:!0}):a[o]=true,a)),l=function(e,t){switch(t){case"normal":return e("testsPassed");case"terminated":return e("testsTerminated");case"error":return e("testsFailed");case null:return"";default:throw new Error("Unknown code: ".concat(t))}}(r,n);return i.createElement("div",{className:s},"status: ".concat(t," → ").concat(l))};var vt=n(20637);const bt=(0,i.memo)((function(){var e=(0,i.useRef)(null);(0,i.useEffect)((function(){e.current.querySelectorAll("pre.hljs code").forEach((function(e){vt.Z.highlightElement(e),vt.Z.lineNumbersBlock(e)}))}),[]);var t=(0,i.useContext)(ut).readme;return i.createElement("div",{ref:e,className:"p-2 hexlet-ide-readme overflow-auto w-100 mh-100",dangerouslySetInnerHTML:{__html:t}})}));var yt=n(81493),ht=n(5464),gt=n.n(ht),wt=n(11227);const Et=function(e){return function(){return wt("hexletIde:frontend:".concat(e)).apply(void 0,arguments)}};var Ot={sh:"shell",md:"markdown",rb:"ruby",yml:"yaml",yaml:"yaml",erl:"erlang",py:"python",rkt:"scheme",phtml:"php",php:"php",pug:"pug",java:"java",js:"javascript",jsx:"javascript",json:"json",css:"css",sql:"sql"},Tt={javascript:2,json:2,jsx:2,ruby:2,yaml:2,java:4,"text/x-java":4,py:4,rkt:2,erlang:2,python:4,php:4,pug:2,"text/html":2,html:2,css:2,sql:4,"application/x-sql":4},xt={javascript:!0,json:!0,jsx:!0,ruby:!0,yaml:!0,"text/x-java":!0,java:!0,scheme:!0,erlang:!0,python:!0,php:!0,pug:!0,"text/html":!0,html:!0,css:!0,sql:!0,"application/x-sql":!0};function kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(n),!0).forEach((function(t){Pt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ct=Et("editor"),Rt={fontSize:14,scrollBeyondLastLine:!1,minimap:{enabled:!1},hover:{delay:1e3},renderWhitespace:"trailing",formatOnPaste:!0};const Dt=function(e){var t,n,r=e.file,a=e.content,o=e.focusesCount,s=e.current,l=(0,c.I0)(),u=(0,i.useRef)(null),f=(t=gt()(),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return St(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?St(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=f[0],m=f[1],p=jt(jt({},Rt),{},{readOnly:r.readonly});Ct("extension",r.ext);var v,b=(v=r.ext,Ot[v]||r.mime||"");Ct("language",b);var y=xt[b]||!1;Ct("insertSpaces",y);var h=Tt[b]||2;Ct("tabSize",h);var g={tabSize:h,insertSpaces:y};return(0,i.useEffect)((function(){u.current&&u.current.layout()}),[m.width,m.height]),(0,i.useEffect)((function(){u.current&&u.current.focus()}),[o]),i.createElement("div",{className:"position-relative d-flex h-100"},d,i.createElement(yt.ZP,{language:b,theme:"vs-dark",defaultValue:r.content,value:a,options:p,onChange:function(e){l(Je.editFile({id:r.id,content:e}))},editorDidMount:function(e,t){u.current=e;var n=e.getModel();n.updateOptions(g),n.pushEOL(0),function(e){var t=e.monaco,n=e.actions,r=e.dispatch;return[{key:t.KeyMod.CtrlCmd|t.KeyCode.Enter,action:function(){return r(n.runTests())}},{key:t.KeyMod.CtrlCmd|t.KeyCode.US_OPEN_SQUARE_BRACKET,action:function(){return r(n.selectPrevFileTab())}},{key:t.KeyMod.CtrlCmd|t.KeyCode.US_CLOSE_SQUARE_BRACKET,action:function(){return r(n.selectNextFileTab())}},{key:t.KeyMod.CtrlCmd|t.KeyCode.US_BACKTICK,action:function(){return r(n.selectActiveTerminalTab("terminal1"))}}]}({monaco:t,actions:Je,dispatch:l}).forEach((function(t){var n=t.key,r=t.action;e.addCommand(n,r)})),s&&e.focus()}}))};var Ft=n(89927);function At(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function It(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?At(Object(n),!0).forEach((function(t){Nt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):At(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kt(){return(Kt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Zt=[{sample:"text/markdown",component:function(e){var t,n,r=e.file,a=F()({"px-3 py-2 overflow-auto h-100 w-100 hexlet-ide-readme":!0}),o=(t=r.content,function(e){var t={tables:!0,sanitize:!1,html:!0,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkTarget:"_blank",highlight:function(e,t){if(t&&vt.Z.getLanguage(t))try{var n=vt.Z.highlight(e,{language:t}).value;return vt.Z.lineNumbersValue(n)}catch(e){}try{var r=vt.Z.highlightAuto(e).value;return vt.Z.lineNumbersValue(r)}catch(e){}return""}};return new Ft._(It(It({},t),e))}(n).render(t));return i.createElement("div",{className:a,dangerouslySetInnerHTML:{__html:o}})}},{sample:"image",component:function(e){var t,n=e.file,r=(t=n.relativePath,"/static/".concat(t));return i.createElement("div",{className:"overflow-auto w-100 h-100"},i.createElement("img",{alt:"",src:"".concat(r,"?").concat(n.imageHash)}))}},{sample:"output",component:function(){var e=(0,c.v9)((function(e){var t=e.tests;return{data:t.data,testsRunningState:t.testsRunningState,exit:t.exit,codeReviewState:t.codeReviewState,codeReviewUrl:t.codeReviewUrl,canFinishExercise:t.canFinishExercise}})),t=e.data,n=e.testsRunningState,r=e.exit,a=e.codeReviewState,o=e.codeReviewUrl,s=e.canFinishExercise,l=(0,i.useContext)(ut).isReviewable;return i.createElement("div",{className:"text-body d-flex flex-column w-100 h-100"},i.createElement("pre",{className:"text-body overflow-auto h-100 w-100 p-2 mb-0",dangerouslySetInnerHTML:{__html:ft.ansi_to_html(t.join(""))}}),i.createElement("div",{className:"d-flex flex-column flex-sm-row mt-auto p-2 bg-dark my-1 flex-shrink-0"},i.createElement(pt,{exit:r,testsRunningState:n}),i.createElement("div",{className:"d-flex ms-0 ms-md-auto mt-3 mt-sm-0"},i.createElement(dt,{codeReviewState:a,codeReviewUrl:o,isReviewable:l}),i.createElement(mt,{canFinishExercise:s}))))}},{sample:"readme",component:bt}],_t=function(){var e,t,n=(0,Ye.$)().t,r=(e=(0,i.useState)(!1),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=r[0],o=r[1],c=i.createElement(rt.Z,{id:"editor-help"},i.createElement(ot.default,{onOutsideClick:function(){return o(!1)}},i.createElement(rt.Z.Title,{className:"text-dark",as:"h3"},n("hotkeys")),i.createElement(rt.Z.Content,{className:"text-dark"},i.createElement("ul",{className:"list-unstyled mb-0"},et()((0,O.getApplicationKeyMap)(),(function(e,t){var r=e.sequences;return i.createElement("li",{key:t,className:"d-flex justify-content-between align-items-baseline"},"".concat(n(t),":"),i.createElement("kbd",{className:"bg-transparent text-dark"},r[0].sequence.toUpperCase()))}))))));return i.createElement(at.Z,{trigger:"click",placement:"left",overlay:c,show:a,onToggle:o},i.createElement(S.Z,null,i.createElement(P.G,{icon:"question-circle",className:"me-2 mt-2 poin"})))},qt=function(e){var t=e.dirty,n=e.handleClose,r=e.visible,a=(0,Ye.$)().t,o=F()("btn","p-0","align-baseline","x-btn-close",t&&"text-muted",{invisible:!r});return i.createElement("button",{type:"button",className:o,onClick:n,title:a("closeTab")},i.createElement(P.G,{icon:["fas","times"]}))},Mt=function(e){var t=e.tab,n=e.dirty,r=e.isActive,a=(0,c.I0)(),o=i.useRef(null),s=(0,it.Z)(o);return i.createElement(nt.Z.Item,{ref:o},i.createElement(nt.Z.Link,{eventKey:t.key,className:"x-btn-no-active-decor"},i.createElement("span",{className:"me-1"},t.name),t.closable&&i.createElement(qt,{dirty:n,handleClose:function(e){e.stopPropagation(),a(Je.closeFile({file:t.file}))},visible:r||s})))},Bt=function(e){var t,n,r=e.tab,a=e.fileInfosByTabKey,o=e.activeTabKey,c=e.areaFocused,s=a[r.key],l=(t=r.mime,(null==(n=Zt.find((function(e){var n=e.sample;return new RegExp(n).exec(t)})))?void 0:n.component)||Dt);return i.createElement(tt.Z.Pane,{key:r.key,eventKey:r.key,bsPrefix:"tab-pane h-100"},i.createElement(l,Kt({},r,{file:s.file,areaFocused:c,current:r.key===o})))};const Ut=function(e){var t=e.areaFocused,n=(0,c.v9)((function(e){var t=e.fileTabsInfo,n=e.files;return{tabs:t.tabs,activeTabKey:t.activeTabKey,fileInfosByTabKey:j()(n.fileInfos,"id")}})),r=n.tabs,a=n.activeTabKey,o=n.fileInfosByTabKey,s=(0,c.I0)();return i.createElement("div",{className:"d-flex flex-column h-100 w-100",onFocus:function(){s(Je.setFocusOnArea({areaName:"fileTabsBox"}))}},i.createElement(ct,{key:"reconnect"}),i.createElement(tt.Z.Container,{onSelect:function(e){s(Je.selectActiveFileTab({key:e}))},activeKey:a,defaultActiveKey:"readme"},i.createElement("div",{className:"d-flex w-100 justify-content-between border-bottom border-dark flex-shrink-0"},i.createElement(nt.Z,{variant:"tabs",className:"border-0"},r.map((function(e){var t=o[e.key].dirty;return i.createElement(Mt,{tab:e,dirty:t,key:e.key,isActive:e.key===a})}))),i.createElement(_t,null)),i.createElement(tt.Z.Content,{bsPrefix:"h-100 tab-content overflow-hidden"},r.map((function(e){return i.createElement(Bt,{key:e.key,tab:e,fileInfosByTabKey:o,activeTabKey:a,areaFocused:t})})))))};var zt=n(12320),Gt=n(12617);function $t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ht(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ht(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Vt=function(e){var t=e.id,n=e.active,r=e.command,a=void 0===r?"":r,o=$t(gt()(),2),s=o[0],l=o[1],u=$t((0,i.useState)(),2),f=u[0],d=u[1],m=$t((0,i.useState)(),2),p=m[0],v=m[1],b=(0,i.useRef)(null),y=(0,i.useContext)(ut),h=y.requests,g=(0,i.useRef)(!1),w=(0,c.v9)((function(e){return{info:e.terminals[t]}})).info;return(0,i.useEffect)((function(){var e=new zt.Terminal;d(e);var n=new Gt.FitAddon;v(n),e.loadAddon(n),e.onData(function(e,t){return function(n){t.requests.writeToTerminal({id:e,data:n})}}(t,y)),e.open(b.current),n.fit(),h.startTerminal({id:t,cols:e.cols,rows:e.rows,command:a}),e.focus(),g.current=!0}),[]),(0,i.useEffect)((function(){g.current&&f&&f.write(N()(w.data))}),[w.data.length]),(0,i.useEffect)((function(){g.current&&f&&f.focus()}),[n]),(0,i.useEffect)((function(){if(g.current&&f){var e=p.proposeDimensions(),n=e.cols,r=e.rows;f.resize(n,r-1),p.fit(),h.resizeTerminal({id:t,cols:n,rows:r-1})}}),[l.width,l.height]),i.createElement("div",{className:"position-relative d-flex flex-column h-100 x-bg-black"},s,i.createElement("div",{className:"d-flex w-100 h-100 mt-2 ms-2"},i.createElement("div",{className:"h-100 w-100",ref:b})))};var Wt=new(lt()),Jt="disabled";const Qt=function(){var e=(0,Ye.$)().t,t=(0,c.v9)((function(e){return e.linter})),n=t.data,r=t.exit,a=t.state,o=(0,i.useContext)(ut).linterConfig;if(o.state===Jt)return i.createElement("div",{className:"p-3 h-100 overflow-auto",dangerouslySetInnerHTML:{__html:o.message}});var s="finished"===a,l=F()({"mt-auto":!0,"text-warning":"terminated"===r&&s,"text-danger":"error"===r&&s,"text-success":"normal"===r&&s,"d-none":"none"===a}),u=s?function(e,t){switch(t){case"normal":return e("linterPassed");case"terminated":return e("infinityLoop");case"error":return e("linterFailed");default:throw new Error("Unexpected code: ".concat(t))}}(e,r):"";return i.createElement("div",{className:"p-2 overflow-auto h-100 d-flex flex-column"},i.createElement("pre",{className:"w-100 text-body overflow-auto m-0",dangerouslySetInnerHTML:{__html:Wt.ansi_to_html(n)}}),i.createElement("div",{className:l},"Linter status:"," ",a," ","finished"===a&&" → ".concat(u)))},Yt=function(e){var t=e.id,n=e.active,r=(0,i.useContext)(ut).commandToStartRepl;return i.createElement(Vt,{id:t,active:n,command:r})};var Xt=function(e,t){return e===t};const en=function(){var e=(0,c.I0)(),t=(0,c.v9)((function(e){return{activeTabKey:e.terminalTabsInfo.activeTabKey}})).activeTabKey,n=(0,c.v9)((function(e){return e.linter})),r=n.state,a=n.exit,o="finished"===r,s="error"===a,l="normal"===a,u=F()("text-decoration-none x-btn-no-active-decor",{"text-danger":o&&s},{"text-success":o&&l}),f=F()("ms-2",{invisible:!o}),d=["fas",s?"exclamation-circle":"check-circle"];return i.createElement(tt.Z.Container,{onClick:function(){e(Je.setFocusOnArea({areaName:"terminalTabsBox"}))},onSelect:function(t){e(Je.selectActiveTerminalTab(t))},activeKey:t,defaultActiveKey:"linter"},i.createElement(nt.Z,{bsPrefix:"nav nav-tabs flex-shrink-0"},i.createElement(nt.Z.Item,null,i.createElement(nt.Z.Link,{className:u,eventKey:"linter"},"Linter",i.createElement(P.G,{icon:d,className:f}))),i.createElement(nt.Z.Item,null,i.createElement(nt.Z.Link,{className:"x-btn-no-active-decor",eventKey:"readme"},"Readme")),i.createElement(nt.Z.Item,null,i.createElement(nt.Z.Link,{className:"x-btn-no-active-decor",eventKey:"terminal1"},"Terminal 1")),i.createElement(nt.Z.Item,null,i.createElement(nt.Z.Link,{className:"x-btn-no-active-decor",eventKey:"terminal2"},"Terminal 2")),i.createElement(nt.Z.Item,null,i.createElement(nt.Z.Link,{className:"x-btn-no-active-decor",eventKey:"repl"},"REPL"))),i.createElement(tt.Z.Content,{bsPrefix:"h-100 tab-content overflow-hidden"},i.createElement(tt.Z.Pane,{eventKey:"linter",bsPrefix:"tab-pane h-100"},i.createElement(Qt,null)),i.createElement(tt.Z.Pane,{eventKey:"readme",bsPrefix:"tab-pane h-100"},i.createElement(bt,null)),i.createElement(tt.Z.Pane,{eventKey:"terminal1",mountOnEnter:!0,bsPrefix:"tab-pane h-100"},i.createElement(Vt,{id:"terminal1",active:Xt(t,"terminal1")})),i.createElement(tt.Z.Pane,{eventKey:"terminal2",mountOnEnter:!0,bsPrefix:"tab-pane h-100"},i.createElement(Vt,{id:"terminal2",active:Xt(t,"terminal2")})),i.createElement(tt.Z.Pane,{eventKey:"repl",mountOnEnter:!0,bsPrefix:"tab-pane h-100"},i.createElement(Yt,{id:"repl",active:Xt(t,"repl")}))))};var tn={tabSelectNext:"ctrl+alt+]",tabSelectPrev:"ctrl+alt+[",testsRun:"ctrl+enter",focusTerminal:"ctrl+`"};const nn=function(){var e=(0,c.I0)(),t=(0,c.v9)((function(e){var t=e.ide;return{loaded:t.loaded,focusedArea:t.focusedArea}})),n=t.loaded,r=t.focusedArea;if(!n)return i.createElement(x,null);var a={tabSelectPrev:function(){e(Je.selectPrevFileTab())},tabSelectNext:function(){e(Je.selectNextFileTab())},testsRun:function(){e(Je.runTests())},focusTerminal:function(){e(Je.selectActiveTerminalTab("terminal1"))}};return i.createElement(O.GlobalHotKeys,{keyMap:tn,handlers:a},i.createElement("div",{className:"hexlet-ide d-flex d-row"},i.createElement(Qe,{areaFocused:"filesTreeBox"===r}),i.createElement("div",{className:"col-10 d-flex flex-column px-0 position-relative"},i.createElement(T.Z,{split:"horizontal",primary:"second",defaultSize:"25%",pane1ClassName:"overflow-hidden"},i.createElement("div",{className:"h-100 d-flex flex-column"},i.createElement(Ut,{areaFocused:"fileTabsBox"===r})),i.createElement("div",{className:"h-100 w-100 d-sm-flex flex-column"},i.createElement(en,{areaFocused:"terminalTabsBox"===r}))))))};function rn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function an(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var on=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),an(this,"emit",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.websocket.emit(e,t)})),an(this,"reconnect",(function(){console.log("reconnecting..."),r.websocket.io.cleanup(),r.websocket.io.reconnecting=!1,r.websocket.io.backoff.reset(),r.websocket.io.reconnect(),console.log("reconnecting started...")})),this.websocket=t(n,{reconnectionAttempts:19,reconnectionDelay:2e3})}var t,n;return t=e,(n=[{key:"on",value:function(e,t){(["connect_error","reconnect_attempt","reconnect_error"].includes(e)?this.websocket.io:this.websocket).on(e,(function(e){t(e)}))}},{key:"onConnect",value:function(e){this.on("connect",e)}},{key:"onDisconnect",value:function(e){this.on("disconnect",e)}},{key:"onConnectError",value:function(e){this.on("connect_error",e)}},{key:"onReconnectAttempt",value:function(e){this.on("reconnect_attempt",e)}},{key:"onReconnectError",value:function(e){this.on("reconnect_error",e)}},{key:"onForceDisconnect",value:function(e){var t=this;this.websocket.on("forceDisconnect",(function(){t.websocket.disconnect(),e.apply(void 0,arguments)}))}}])&&rn(t.prototype,n),e}(),cn=function(e){var t=e.dispatch,n=e.payload;return t(Re.refreshFilesTree(n))},sn=function(e){var t=e.dispatch,n=e.payload;return t(Re.refreshFilesTree(n))},ln=function(e){var t=e.dispatch,n=e.payload;return t(Re.updateDirectory(n))},un=function(e){var t=e.dispatch,n=e.payload;return t($.openFiles(n))},fn=function(e){var t=e.dispatch,n=e.payload;return t($.openFile(n))},dn=function(e){var t=e.dispatch,n=e.payload;return t($.saveFile(n))},mn=function(e){return(0,e.dispatch)(ze.writeToTerminal())},pn=function(e){var t=e.dispatch,n=e.payload;return t(ze.updateTerminal(n))},vn=function(e){var t=e.dispatch,n=e.payload;return t(q.addTestsResultProgress(n))},bn=function(e){var t=e.dispatch,n=e.payload;return t(Me.addLintResultProgress(n))},yn=function(e){var t=e.dispatch,n=e.payload;return t(Me.runLintSuccess(n))},hn=function(e){var t=e.dispatch,n=e.payload;return t(Re.fetchDirectory(n))},gn=function(e){var t=e.dispatch,n=e.payload;return t($.reloadImage(n))},wn=function(e){var t=e.dispatch,n=e.payload,r=e.emitToParent,a=e.requests,i=e.state,o=e.linterDisabled,c=i.tests.data;t(q.runTestsSuccess(n));var s={output:c.join("\n"),exit:n.exit};"normal"===n.exit?r("runTestsPassed",s):r("runTestsFailed",s),o||(t(Me.runLintRequest()),a.runLint())};function En(e){return(En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var On=Et("rpc:sent");const Tn=function(e){var t=function(e){return function(t){return function(n){On(t,En(n),n),e.emit(t,n)}}}(e);return{writeFile:t("writeFile"),getFullTree:t("getFullTree"),openFiles:t("openFiles"),openFile:t("openFile"),runTests:t("runTests"),runLint:t("runLint"),resizeTerminal:t("resizeTerminal"),startTerminal:t("startTerminal"),writeToTerminal:t("writeToTerminal"),getDirectoryChildren:t("getDirectoryChildren"),getInitialTree:t("getInitialTree")}},xn=function(e){var t=function(e){return function(t){return function(n){e(t,n)}}}(e);return{sendToCodeReview:t("sendToCodeReview"),finishExercise:t("finishExercise"),connect:t("connect"),disconnect:t("disconnect"),reconnectError:t("reconnectError"),connectError:t("connectError"),forceDisconnect:t("forceDisconnect")}};function kn(e){return(kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Cn='clear && make console || true && clear && echo "This exercise has no REPL"',Rn=Et("widget"),Dn=Et("rpc:received"),Fn={io:s.ZP},An=function(){function e(t,n){var a=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};jn(this,e),Sn(this,"run",(function(){a.store.dispatch(q.runTestsRequest()),a.requests.runTests()})),Sn(this,"showCodeReviewLink",(function(e){a.store.dispatch(q.finishCodeReviewCreating({url:e}))})),Sn(this,"reconnectSocket",(function(){a.store.dispatch(me.onManualReconnect()),a.rpc.reconnect()})),this.container=u()(Fn,s),this.config=u()(d,o),Rn("config",this.config);var l=this.config,f=l.readme,m=l.filesToOpen,v=l.isReviewable,b=l.linterConfig,y=void 0===b?{}:b;this.rpc=new on(this.container.io,t),this.requests=Tn(this.rpc),this.callbacks=xn(n);var g={readme:f,isReviewable:v,requests:this.requests,commandToStartRepl:Cn,linterConfig:y},w={requests:this.requests,callbacks:this.callbacks,context:g};this.store=p(We,{extraArgument:w}),this.rpc.onConnect((function(){Rn("onConnect"),a.requests.getInitialTree(m),a.requests.openFiles(m),a.store.dispatch(me.connectIde()),a.callbacks.connect()})),this.rpc.onDisconnect((function(){Rn("onDisconnect"),a.store.dispatch(me.disconnectIde()),a.callbacks.disconnect()})),this.rpc.onReconnectAttempt((function(){Rn("onReconnectAttempt"),a.store.dispatch(me.reconnectAttempt())})),this.rpc.onReconnectError((function(){Rn("onReconnectError"),a.callbacks.reconnectError()})),this.rpc.onConnectError((function(){Rn("onConnectError"),a.callbacks.connectError()})),this.rpc.onForceDisconnect((function(){Rn("onForceDisconnect"),a.store.dispatch(me.forceDisconnect()),a.callbacks.forceDisconnect()})),Object.keys(r).forEach((function(e){return a.rpc.on(e,(function(t){var i=JSON.parse(t).payload;Dn(e,kn(i),t);var o=a.store.getState(),c=r[e],s=y.state===Jt;c({dispatch:a.store.dispatch,requests:a.requests,callbacks:a.callbacks,payload:i,emitToParent:n,state:o,linterDisabled:s})}))})),h({lng:this.config.language}),E(),this.vdom=i.createElement(c.zt,{store:this.store},i.createElement(ut.Provider,{value:g},i.createElement(nn,null)))}var t,n;return t=e,(n=[{key:"start",value:function(e){this.domElement=e,this.render(),this.runAutosave()}},{key:"runAutosave",value:function(){var e=this;this.autosaveTimer=setInterval((function(){return function(e,t){Rn("saveDirtyFileTabs"),t.getState().files.fileInfos.filter((function(e){return e.dirty})).forEach((function(t){var n=(new Date).getTime();e({lastSavedAt:n,content:t.file.content,filePath:t.file.path,id:t.id})}))}(e.requests.writeFile,e.store)}),this.config.autosaveInterval)}},{key:"render",value:function(){Rn("element",this.domElement),o.render(this.vdom,this.domElement)}}])&&Pn(t.prototype,n),e}();function In(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}var Nn=Et("postMessage"),Kn=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.debug="hexletIde:*",t=document.getElementById("hexlet-ide")){e.next=4;break}throw new Error("Did not find '#hexlet-ide' on the page");case 4:return e.next=6,(0,a.y1)({methods:{init:function(e){var a=window.location.origin;(n=new An(a,(function(e,t){Nn(e,t),r[e](t)}),e)).start(t)},run:function(){return n.run()},reconnectSocket:function(){return n.reconnectSocket()},showCodeReviewLink:function(e){n.showCodeReviewLink(e)}},debug:!0}).promise;case 6:return(r=e.sent).onConnect(),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){In(i,r,a,o,c,"next",e)}function c(e){In(i,r,a,o,c,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();window.ideWidget=Kn()}},e=>{e.O(0,[216],(()=>(99644,e(e.s=99644)))),e.O()}]);