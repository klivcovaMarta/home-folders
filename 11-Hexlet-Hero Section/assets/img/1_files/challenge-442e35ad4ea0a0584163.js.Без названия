"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[454],{96431:function(e,n,t){var r=t(8810),s=t.n(r),a=t(62172),i=t.n(a),o=t(67294),l=t(73935),c=t(39704),u=t(76403),d=t(25512),m=t(26793),f=t(84283),p=t.n(f),h=function(e){var n=e.instanceId,t=e.stateName,r=e.serverStatus,s=(0,m.$)().t,a=s("web.courses.lessons.exercise_unit.not_loading_html",{link:p().instance_path(n),confirm:s("web.courses.lessons.exercise_unit.confirm_reset")}),i=s("web.lessons.exercises.instances.container_loading",{state:t}),l=s("web.lessons.exercises.instances.operational");return o.createElement("div",{className:"d-flex flex-column flex-fill align-items-center justify-content-center"},o.createElement("div",{className:"alert border-0 rounded-0 text-center w-100"},"alive"===r?o.createElement("div",null,o.createElement("span",{className:"spinner-border spinner-border-sm mr-2"}),i,o.createElement("div",{className:"text-center",dangerouslySetInnerHTML:{__html:a}})):o.createElement("div",null,o.createElement("span",{className:""}),l)))},v=t(5943),g=t(88792),b=t(68496),x=t(48358),w=t(99875),E=t.n(w),_=t(85924),S=function(e){var n=e.code,t=_.Z.highlightAuto(n).value;return o.createElement("pre",{className:"hljs"},o.createElement("code",{dangerouslySetInnerHTML:{__html:t}}))},y=function(e){var n=e.eventKey,t=e.text,r=(0,o.useContext)(g.Z),s=(0,b.n)(n),a=r===n?"fa-chevron-double-up":"fa-chevron-double-down",i=E()("far","fa-xs","ml-2",a);return o.createElement(x.Z,{onClick:s,className:"text-decoration-none stretched-link link-dark"},t,o.createElement("span",{className:i}))},R=function(e){var n=e.items;return n?0===n.length?o.createElement("span",{className:"fa-spin fas fa-spinner"}):o.createElement("div",null,o.createElement(v.Z,null,n.map((function(e){return o.createElement("div",{className:"card",key:e.id},o.createElement("div",{className:"card-header position-relative",role:"tab",id:e.id},o.createElement("h5",{className:"mb-0"},o.createElement(y,{eventKey:"collapse"+e.id,text:e.file_name}))),o.createElement(v.Z.Collapse,{eventKey:"collapse"+e.id},o.createElement("div",{className:"card-body"},o.createElement(S,{code:e.text}))))})))):null},k=t(65859),I=t(50308),N=t.n(I),T=t(87757),C=t.n(T),F=t(97779),M=t(9216),Z=t(9669),O=t.n(Z),P=t(13876),U=t.n(P),j=t(39249),L=t(11227),H=t.n(L);localStorage.debug="hexlet:*,hexletIde:*";var D=function(e){return H()("hexlet:"+e)},V=function(e,n){var t,r=null==(t=window.amplitude)||null==t.getInstance?void 0:t.getInstance();if(r)try{r.logEvent(e,n)}catch(s){console.log("Amplitude is disabled, error is "+s)}},q=t(28583),$=t.n(q),A=(0,u.oM)({name:"run",initialState:{},reducers:{getRunRequest:function(e){return e},getRunSuccess:function(e,n){$()(e,n.payload.run)},getRunFailure:function(e){return e}}}),G=A.actions,W=A.reducer,z=(0,u.oM)({name:"settings",initialState:{isPageVisible:!0,isStarted:!1,isForceDisconnected:!1,isForceReconnecting:!1,isManualReconnecting:!1,isConnectError:!1,isFinishedModalOpened:!1,isTestsStarted:!1,wasCodeReviewSent:!1,isIdeConnected:!1,testsPassed:!1,output:null,isIdeLoadingError:!1},reducers:{onConnect:function(e){e.isConnectError=!1,e.isForceReconnecting=!1,e.isManualReconnecting=!1,e.isIdeConnected=!0},onDisconnect:function(e){e.isConnectError=!0,e.isTestsStarted=!1,e.isManualReconnecting=!1,e.isForceReconnecting=e.isPageVisible},onForceRestarted:function(e){e.isForceReconnecting=!1},runTestsRequest:function(e){e.isTestsStarted=!0,e.wasCodeReviewSent=!1},runTestsSuccess:function(e,n){e.isTestsStarted=!1,e.testsPassed=n.payload.passed,e.output=n.payload.output},runTestsFailure:function(e,n){e.isTestsStarted=!1,e.testsPassed=n.payload.passed,e.output=n.payload.output},openFinishedModal:function(e){e.isFinishedModalOpened=!0},closeFinishedModal:function(e){e.isFinishedModalOpened=!1},onForceDisconnect:function(e){e.isForceDisconnected=!0,e.isTestsStarted=!1},sendToReviewRequest:N(),sendToReviewSuccess:function(e){e.wasCodeReviewSent=!0},sendToReviewFailure:N(),onPageHide:function(e){e.isPageVisible=!1},onPageShow:function(e){e.isPageVisible=!0,e.isManualReconnecting=e.isConnectError},onIdeLoadingError:function(e){e.isIdeLoadingError=!0}},extraReducers:function(e){e.addCase(G.getRunSuccess,(function(e,n){e.isStarted="started"===n.payload.run.state}))}}),B=z.actions,K=z.reducer;function Q(e,n,t,r,s,a,i){try{var o=e[a](i),l=o.value}catch(c){return void t(c)}o.done?n(l):Promise.resolve(l).then(r,s)}function Y(e){return function(){var n=this,t=arguments;return new Promise((function(r,s){var a=e.apply(n,t);function i(e){Q(a,r,s,i,o,"next",e)}function o(e){Q(a,r,s,i,o,"throw",e)}i(void 0)}))}}var J=D("challenge"),X=(0,u.hg)("solution/updateState",function(){var e=Y(C().mark((function e(n){var t,r,s;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J("fetchSolutionState",n),e.prev=1,t=p().solution_api_instance_path(n,{format:"json"}),e.next=5,O().get(t);case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(1),s=M.Z.t("community.flashes.error"),(0,j.Am)(s),e.t0;case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(n){return e.apply(this,arguments)}}()),ee=(0,u.hg)("solution/open",function(){var e=Y(C().mark((function e(n){var t,r,s;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J("openSolution",n),e.prev=1,t=p().solution_api_instance_path(n,{open:!0,format:"json"}),e.next=5,O().get(t);case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(1),s=M.Z.t("community.flashes.error"),(0,j.Am)(s),e.t0;case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(n){return e.apply(this,arguments)}}()),ne=(0,u.oM)({name:"solution",initialState:{removedParts:[],isModalOpened:!1,reviewLocation:null,reviewState:"canSend",fetching:!1},reducers:{openSolutionModal:function(e){e.isModalOpened=!0},closeSolutionModal:function(e){e.isModalOpened=!1},onTestsPassed:function(e,n){$()(e,n.payload)}},extraReducers:function(e){e.addCase(X.pending,(function(e){e.fetching=!0})).addCase(X.fulfilled,(function(e,n){e.fetching=!1,$()(e,n.payload)})).addCase(X.rejected,(function(e){e.fetching=!1})).addCase(ee.fulfilled,(function(e,n){$()(e,n.payload)})).addCase(B.runTestsSuccess,(function(e,n){$()(e,n.payload)})).addCase(B.sendToReviewSuccess,(function(e,n){e.reviewLocation=n.payload.location,e.reviewState="sent"})).addCase(B.sendToReviewFailure,(function(e){e.reviewState="canSend"})).addCase(B.runTestsRequest,(function(e){e.reviewState="canSend",e.reviewLocation=null})).addCase(B.closeFinishedModal,(function(e){e.reviewState="canSend",e.reviewLocation=null})).addCase(B.sendToReviewRequest,(function(e){e.reviewState="sending"}))}}),te=Object.assign({},ne.actions,{fetchSolutionState:X,openSolution:ee}),re=ne.reducer;function se(e,n,t,r,s,a,i){try{var o=e[a](i),l=o.value}catch(c){return void t(c)}o.done?n(l):Promise.resolve(l).then(r,s)}var ae=D("challenge"),ie=(0,u.hg)("guide/logFirstVisit",function(){var e,n=(e=C().mark((function e(n){var t;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve();case 2:return t=p().api_user_path({format:"json"}),e.next=5,O().put(t,{user:{ide_onboarding_viewed:!0}});case 5:ae("visit is logged for instance "+n);case 6:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,s){var a=e.apply(n,t);function i(e){se(a,r,s,i,o,"next",e)}function o(e){se(a,r,s,i,o,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}()),oe=(0,u.oM)({name:"guide",initialState:{isModalOpened:!1,isFirstVisit:!1},reducers:{openGuideModal:function(e){e.isModalOpened=!0},closeGuideModal:function(e){e.isModalOpened=!1}},extraReducers:function(e){e.addCase(ie.fulfilled,(function(e){e.isFirstVisit=!1}))}}),le=Object.assign({},oe.actions,{logFirstVisit:ie}),ce=oe.reducer;function ue(e,n,t,r,s,a,i){try{var o=e[a](i),l=o.value}catch(c){return void t(c)}o.done?n(l):Promise.resolve(l).then(r,s)}function de(e){return function(){var n=this,t=arguments;return new Promise((function(r,s){var a=e.apply(n,t);function i(e){ue(a,r,s,i,o,"next",e)}function o(e){ue(a,r,s,i,o,"throw",e)}i(void 0)}))}}var me,fe,pe,he=D("challenge"),ve=function(e){var n=e.instanceId;return de(C().mark((function e(){var t;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p().heartbeat_api_instance_path(n,{format:"json"}),e.prev=1,e.next=4,O().post(t,{validateStatus:function(e){return e<500},timeout:3e3});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})))},ge=(0,F.UY)({run:W,settings:K,solution:re,guide:ce}),be=Object.assign({},G,B,te,le,{getRun:function e(n){var t=n.instanceId,r=n.runId;return function(){var n=de(C().mark((function n(s){var a,i,o,l;return C().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=p().api_instance_run_path(t,r,{format:"json"}),s(G.getRunRequest()),he("getRun:started",a),n.prev=3,n.next=6,O().get(a);case 6:i=n.sent,o=i.data,he("getRun:finished",i),he("run:",o),s(G.getRunSuccess({run:o})),"started"!==o.state?setTimeout((function(){return s(e({instanceId:t,runId:r}))}),3e3):(U().every(6e5,(function(){he("send heartbeat"),s(ve({instanceId:t}))})),U().change((function(e,n){"visible"===n?(he("page is visible now. send heartbeat"),s(ve({instanceId:t})),s(B.onPageShow())):s(B.onPageHide())}))),n.next=20;break;case 14:n.prev=14,n.t0=n.catch(3),s(G.getRunFailure()),l=M.Z.t("community.flashes.error"),(0,j.Am)(l),console.log(n.t0);case 20:case"end":return n.stop()}}),n,null,[[3,14]])})));return function(e){return n.apply(this,arguments)}}()},onConnectError:function(){return function(){var e=de(C().mark((function e(n,t){var r,s,a,i,o,l,c,u;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t(),s=r.run,a=r.settings,i=s.id,o=s.instance_id,l=a.isForceDisconnected,c=a.isPageVisible,!l&&c){e.next=5;break}return e.abrupt("return");case 5:return he("onForceReconnecting"),u=p().restart_api_instance_run_path(o,i,{format:"json"}),e.next=9,O().put(u);case 9:n(B.onForceRestarted());case 10:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},onRunFinished:function(e){var n=e.finishUrl,t=e.instanceId,r=e.result,a=e.output;return function(){var e=de(C().mark((function e(i){var o,l,c,u,d,m,f,h,v;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=p().api_instance_results_path(t,{format:"json"}),u=p().solution_api_instance_path(t,{format:"json"}),d="passed"===r,he("onRunFinished",r),e.prev=4,e.next=7,O().post(c,{passed:d,instanceId:t});case 7:if(i(B.runTestsSuccess({passed:d,output:a})),!d){e.next=17;break}return e.next=11,O().put(n);case 11:return e.next=13,O().get(u);case 13:m=e.sent,f=m.data,console.log(f),i(te.onTestsPassed(f));case 17:e.next=25;break;case 19:e.prev=19,e.t0=e.catch(4),i(B.runTestsFailure({output:a,passed:d})),h=M.Z.t("community.flashes.error"),(0,j.Am)(h),console.log(e.t0);case 25:v=null!=(o=null==(l=s().challenge)?void 0:l.slug)?o:s().course.slug+"_"+s().lesson.slug,V("exercise_tests_run_finished",{slug:v,passed:d});case 27:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(n){return e.apply(this,arguments)}}()},sendToCodeReview:function(){return function(){var e=de(C().mark((function e(n,t){var r,s,a,i,o,l,c,u,d,m,f;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t(),s=r.settings,a=r.run,i=s.output,o=s.testsPassed,l=a.id,c=a.instance_id,u=p().api_instance_run_code_reviews_path(c,l,{format:"json"}),he("sendToCodeReview",{runId:l,instanceId:c}),he("sendToCodeReview",i),he("sendToCodeReview Tests Passed:",o),n(B.sendToReviewRequest()),e.prev=8,e.next=11,O().post(u,{output:i,tests_passed:o});case 11:d=e.sent,m=p().code_review_url(d.data.id),n(B.sendToReviewSuccess({location:m})),e.next=22;break;case 16:e.prev=16,e.t0=e.catch(8),n(B.sendToReviewFailure()),f=M.Z.t("community.flashes.error"),(0,j.Am)(f),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[8,16]])})));return function(n,t){return e.apply(this,arguments)}}()}}),xe=D("challenge"),we=function(e){var n=e.instanceId,t=(0,m.$)().t,r=t("web.courses.lessons.exercise_unit.loading_error",{link:p().instance_path(n),confirm:t("web.courses.lessons.exercise_unit.confirm_reset")});return o.createElement("div",{className:"alert alert-warning align-self-center w-100 text-center",dangerouslySetInnerHTML:{__html:r}})},Ee=function(e){var n=e.url,t=e.htmlReadme,r=e.filesToOpen,s=e.isReviewable,a=e.finishUrl,i=e.linterConfig,l=(0,c.v9)((function(e){return{instanceId:e.run.instance_id,isManualReconnecting:e.settings.isManualReconnecting,isForceReconnecting:e.settings.isForceReconnecting,isTestsStarted:e.settings.isTestsStarted,wasCodeReviewSent:e.settings.wasCodeReviewSent,codeReviewUrl:e.solution.reviewLocation}})),u=l.instanceId,d=l.isManualReconnecting,m=l.isForceReconnecting,f=l.isTestsStarted,p=l.wasCodeReviewSent,h=l.codeReviewUrl,v=(0,c.I0)(),g=(0,o.useRef)(null),b=(0,o.useRef)(null),x=(0,o.useState)(null),w=x[0],E=x[1],_=function(){v(be.sendToCodeReview())},S=function(){v(be.onForceDisconnect())},y=function(){v(be.onDisconnect())},R=function(){v(be.onConnectError())},I=function(){v(be.onConnect())},T=function(e,n){v(be.onRunFinished({instanceId:u,result:e,finishUrl:a,output:n.output}))},C=function(e){var n;T("failed",{output:null!=(n=null==e?void 0:e.output)?n:null})},F=function(e){var n;T("passed",{output:null!=(n=null==e?void 0:e.output)?n:null})},M=function(){v(be.openFinishedModal())};return(0,o.useEffect)((function(){b.current=(0,k.vL)({iframe:g.current,debug:!0,methods:{runTestsFailed:C,runTestsPassed:F,sendToCodeReview:_,finishExercise:M,forceDisconnect:S,connectError:N(),reconnectError:R,disconnect:y,connect:I,onConnect:N()}}),b.current.promise.then((function(e){xe("HandshakeInit"),e.init({readme:t,filesToOpen:r,isReviewable:s,linterConfig:i}),I()})).catch((function(e){throw xe("Failed to connect to iframe through penpal"),E(e),v(be.onIdeLoadingError()),e}))}),[]),(0,o.useEffect)((function(){d&&!m&&b.current.promise.then((function(e){xe("Handshake Ide:ReconnectSocket"),e.reconnectSocket()}))}),[m,d]),(0,o.useEffect)((function(){f&&b.current.promise.then((function(e){xe("Handshake Ide:Run"),e.run()}))}),[f]),(0,o.useEffect)((function(){p&&b.current.promise.then((function(e){xe("Handshake Ide:SendToCodeReview"),e.showCodeReviewLink(h)}))}),[h,p]),o.createElement("div",{className:"hexlet-ide-iframe d-flex flex-fill"},o.createElement("div",{id:"hexlet-ide-iframe",className:"hexlet-ide-iframe d-flex flex-fill"},w?o.createElement(we,{instanceId:u}):o.createElement("iframe",{title:"hexlet-ide",ref:g,src:n})))},_e=function(e){var n=e.exercise,t=e.nextUrl,r=e.htmlReadme,s=e.filesToOpen,a=e.finishUrl,i=e.linterConfig,l=(0,c.v9)((function(e){return{instanceId:e.run.instance_id,runId:e.run.id,isForceDisconnected:e.settings.isForceDisconnected,isFinishedModalOpened:e.settings.isFinishedModalOpened,noSolution:e.solution.noSolution||!e.solution.removedParts,removedParts:e.solution.removedParts,isStarted:e.settings.isStarted,serverStatus:e.run.server_status,stateName:e.run.human_state_name,ideUrl:e.run.ide_url}})),u=l.instanceId,f=l.runId,v=l.isForceDisconnected,g=l.isFinishedModalOpened,b=l.noSolution,x=l.removedParts,w=l.isStarted,E=l.serverStatus,_=l.stateName,S=l.ideUrl,y=(0,c.I0)(),k=(0,m.$)().t;(0,o.useEffect)((function(){y(be.getRun({instanceId:u,runId:f}))}),[y,u,f]);var I=function(){y(be.closeFinishedModal())};return v?function(e){var n=e.t;return o.createElement("div",{id:"one_ide",className:"d-flex flex-column flex-fill align-items-center"},o.createElement("span",{className:"alert border-0 rounded-0 text-center w-100 alert-warning"},o.createElement("span",null,n("web.shared.challenge.one_ide"))))}({t:k}):w?o.createElement("div",{className:"hexlet-modal d-flex flex-fill"},o.createElement(Ee,{url:S,htmlReadme:r,filesToOpen:s,isReviewable:n.is_reviewable,finishUrl:a,linterConfig:i}),g&&o.createElement(d.Z,{show:g,onHide:I,size:"lg"},o.createElement(d.Z.Header,null,o.createElement(d.Z.Title,null,k("web.shared.challenge.finish_modal.title")),o.createElement("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:I})),o.createElement(d.Z.Body,null,b?o.createElement("span",null,k("web.shared.challenge.solution_modal.no_solution")):o.createElement(R,{items:x})),o.createElement(d.Z.Footer,{className:"d-flex justify-content-between"},n.is_reviewable&&function(e){var n=e.exercise,t=e.t,r=p().code_reviews_path({q:{exercise_id_eq:n.id}});return o.createElement("a",{className:"btn btn-link text-decoration-none",target:"_blank",href:r,rel:"noopener noreferrer"},t("web.shared.challenge.finish_modal.similar_reviews"))}({exercise:n,t:k}),o.createElement("span",{className:"ml-auto"},o.createElement("button",{type:"button",className:"btn btn-link text-decoration-none",onClick:I},k("web.shared.challenge.finish_modal.close")),o.createElement("a",{href:t,className:"btn btn-primary"},k("web.shared.challenge.finish_modal.next")))))):o.createElement("div",{className:"hexlet-modal d-flex flex-fill"},o.createElement(h,{instanceId:u,serverStatus:E,stateName:_}))},Se=function(e){var n=e.nextUrl,t=(0,c.v9)((function(e){return{isTestsStarted:e.settings.isTestsStarted,canRunTests:e.settings.isIdeConnected,canGoNext:e.solution.passed||e.run.exercise_finished,isIdeLoadingError:e.settings.isIdeLoadingError}})),r=t.isTestsStarted,s=t.canRunTests,a=t.canGoNext,i=t.isIdeLoadingError,l=(0,m.$)().t,u=(0,c.I0)();if(i)return null;var d=E()({"btn btn-primary flex-shrink-0 btn-lg mt-0 x-btn-no-active-decor px-5 px-md-3 rounded-0":!0,disabled:!a});return s?o.createElement("div",{className:"d-flex flex-fill"},function(e){var n=e.canGoNext,t=e.isTestsStarted,r=e.t,s=e.runTests,a=E()("btn","w-100","x-btn-no-active-decor","px-0","flex-grow-1","rounded-0",{"btn-primary":!n,"btn-dark":n,"btn-lg":!t});return t?o.createElement("button",{type:"button",className:a,disabled:!0},o.createElement("span",{className:"spinner-border spinner-border-sm"})):o.createElement("button",{type:"button",className:a,onClick:s},o.createElement("span",null,r("web.courses.lessons.exercise_unit.run")))}({canGoNext:a,isTestsStarted:r,t:l,runTests:function(){return u(be.runTestsRequest())}}),o.createElement("a",{className:d,href:a?n:"#",title:l(a?"web.courses.lessons.exercise_unit.next":"web.courses.lessons.exercise_unit.need_solution")},o.createElement("span",{className:"fas fa-arrow-right"}))):o.createElement("div",{className:"d-flex flex-fill x-border-md-bottom"},o.createElement("span",{className:"btn w-100"},o.createElement("span",{className:"spinner-border spinner-border-sm"})))},ye=function(){var e=(0,c.v9)((function(e){return{isIdeConnected:e.settings.isIdeConnected,webviewUrl:e.run.web_url}})),n=e.isIdeConnected,t=e.webviewUrl,r=(0,m.$)().t;return n?o.createElement("a",{className:"btn btn-light border py-3 py-md-2 mb-md-2 d-flex flex-fill align-items-center justify-content-center justify-content-md-start rounded-0",href:t,target:"_blank",rel:"noopener noreferrer","data-bs-title":r("web.courses.lessons.exercise_unit.web_url"),"data-bs-toggle":"tooltip","data-bs-placement":"left"},o.createElement("span",{className:"fal fa-globe fa-fw"}),o.createElement("span",{className:"d-none d-md-block ml-2"},r("web.courses.lessons.exercise_unit.web_url"))):null},Re=t(89116),ke=t(66598),Ie=(0,o.createContext)({exerciseKind:null}),Ne=t(53812),Te=function(e){var n=e.message,t=e.openSolution,r=e.canOpenSolution,s=e.timeToWait,a=e.instanceId,i=(0,c.I0)(),l=(0,o.useState)(s),u=l[0],d=l[1];(0,o.useEffect)((function(){var e;return function(){if(0!==s){var n=Date.now()+s;e=setInterval((function(){d(n-Date.now()),Date.now()>=n&&(clearInterval(e),d(0),setTimeout((function(){i(be.fetchSolutionState(a))}),1e3))}),1e3)}}(),function(){clearInterval(e)}}),[i,a,s]);var f=(0,m.$)().t,p=E()("btn",{disabled:!r},r?"btn-danger":"btn-dark");return o.createElement("p",{className:"d-flex justify-content-between align-items-center bg-light ps-1 ps-md-2 ps-xl-3"},o.createElement("span",null,o.createElement("span",{className:"mr-2"},n),s>0&&o.createElement("time",null,(0,ke.Z)(u,"mm:ss"))),o.createElement("button",{className:p,type:"button",onClick:r?t:N(),disabled:!r},f("web.shared.challenge.help_modal.open_solution")))},Ce=function(e){var n=e.canShowSolution,t=e.removedParts,r=e.fetching,s=e.message,a=e.openSolution,i=e.canOpenSolution,l=e.timeToWait,c=e.instanceId;return"challenge"!==(0,o.useContext)(Ie).exerciseKind||n?r?o.createElement("div",{className:"text-center"},o.createElement("div",{className:"spinner-border text-secondary"})):n&&t?o.createElement(R,{items:t}):o.createElement(Te,{message:s,openSolution:a,canOpenSolution:i,timeToWait:l,instanceId:c}):o.createElement("p",{className:"py-2 bg-light px-1 px-md-2 px-xl-3"},s)},Fe=function(){return o.createElement(Re.c,{i18nKey:"web.shared.challenge.help_modal.explanation"},o.createElement("p",null),o.createElement("p",null),o.createElement("ol",null,o.createElement("li",{className:"mb-2"},"explore files"),o.createElement("li",{className:"mb-2"},"run tests"),o.createElement("li",{className:"mb-2"},o.createElement("a",{href:Ne.Z.hexletHowToDebugHelpUrl,target:"_blank",rel:"noopener noreferrer"},"debug"))),o.createElement("p",null,o.createElement("a",{href:Ne.Z.hexletAskQuestionsHelpUrl,target:"_blank",rel:"noopener noreferrer"},"ask questions guide")))},Me=function(e){var n=e.reviewLocation,t=e.reviewState,r=(0,m.$)().t,s=E()({btn:!0,"btn-outline-success":!0,"mx-1":!0,disabled:"sent"!==t});return o.createElement("div",{className:"row"},o.createElement("div",{className:"col text-center"},o.createElement("a",{href:n,className:s,target:"_blank",rel:"noopener noreferrer"},r("web.shared.challenge.solution_modal.my_review"))))},Ze=function(){var e=(0,c.v9)((function(e){return{canShowSolution:e.solution.canShowSolution,canOpenSolution:e.solution.canOpenSolution,instanceId:e.run.instance_id,isModalOpened:e.solution.isModalOpened,removedParts:e.solution.removedParts,solutionMessage:e.solution.message,reviewState:e.solution.reviewState,reviewLocation:e.solution.reviewLocation,fetching:e.solution.fetching,timeToWait:parseInt(e.solution.timeToWait,10)}})),n=e.canShowSolution,t=e.canOpenSolution,r=e.isModalOpened,s=e.removedParts,a=e.solutionMessage,i=e.reviewState,l=e.reviewLocation,u=e.instanceId,f=e.fetching,p=e.timeToWait,h=(0,c.I0)(),v=(0,m.$)().t,g=function(){return h(be.closeSolutionModal())};return o.createElement("div",null,o.createElement(d.Z,{show:r,onHide:g,onShow:function(){h(be.fetchSolutionState(u))},size:"lg"},o.createElement(d.Z.Header,null,o.createElement(d.Z.Title,null,v("web.shared.challenge.help_modal.title")),o.createElement("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:g})),o.createElement(d.Z.Body,null,o.createElement(Fe,null),o.createElement(Ce,{canShowSolution:n,removedParts:s,fetching:f,message:a,openSolution:function(){h(be.openSolution(u))},canOpenSolution:t,timeToWait:p,instanceId:u})),o.createElement(d.Z.Footer,null,o.createElement(Me,{reviewLocation:l,reviewState:i}))))},Oe=function(){var e=(0,c.I0)(),n=(0,m.$)().t,t=E()(["d-flex flex-fill py-3 py-md-2","align-items-center justify-content-center justify-content-md-start","btn btn-light rounded-0","border"]);return o.createElement(o.Fragment,null,o.createElement("button",{className:t,type:"button",onClick:function(){return e(be.openSolutionModal())}},o.createElement("span",{className:"fal fa-life-ring fa-fw"}),o.createElement("span",{className:"d-none d-md-inline-block ml-2"},n("web.shared.challenge.hint"))),o.createElement(Ze,null))},Pe=t(77104),Ue=t(41330),je=t(10615),Le=t(49429),He=t(8536),De=t(36059),Ve=t(20398),qe=t(50866),$e=t(5359),Ae="2x",Ge={1:(me={id:1},me["1x"]=Le,me["2x"]=He,me),2:(fe={id:2},fe["1x"]=De,fe["2x"]=Ve,fe),3:(pe={id:3},pe["1x"]=qe,pe["2x"]=$e,pe)},We=[1,2,3],ze=function(){return o.createElement(je.lr,{showIndicators:!0,showStatus:!1,showThumbs:!1,className:"hexlet-onboarding-carousel"},We.map((function(e){var n=Ge[e];return o.createElement("div",{className:"pb-5 px-4 bg-dark h-100",key:e},o.createElement(Ue.Z,{src:n["1x"],srcSet:n["2x"]+" "+Ae,alt:"ide-image-"+e,className:"w-auto x-object-fit-contain h-100 w-100"}))})))},Be=function(){var e=(0,c.v9)((function(e){return{isModalOpened:e.guide.isModalOpened}})).isModalOpened,n=(0,c.I0)(),t=(0,m.$)().t,r=function(){return n(be.closeGuideModal())};return o.createElement(d.Z,{show:e,onHide:r,className:"x-fullscreen-modal"},o.createElement(d.Z.Header,{className:"border-0 bg-dark flex-shrink-0"},o.createElement("button",{type:"button",className:"btn-close btn-close-white","aria-label":"Close",onClick:r})),o.createElement(d.Z.Body,{className:"bg-dark overflow-hidden p-0 h-100"},o.createElement(ze,null)),o.createElement(d.Z.Footer,{className:"border-0 bg-dark flex-shrink-0"},o.createElement(Pe.Z,{onClick:r,variant:"primary",type:"button"},t("web.shared.challenge.guide.start_to_learn"))))},Ke=function(){var e=(0,c.v9)((function(e){return{isFirstVisit:e.guide.isFirstVisit,instanceId:e.run.instance_id}})),n=e.isFirstVisit,t=e.instanceId,r=(0,c.I0)(),s=(0,m.$)().t;(0,o.useEffect)((function(){n&&r(be.logFirstVisit(t))}),[r,t,n]);var a=E()(["d-flex flex-fill py-3 py-md-2","align-items-center justify-content-center justify-content-md-start","btn btn-light","border","rounded-0"]);return o.createElement(o.Fragment,null,o.createElement("button",{className:a,type:"button",onClick:function(){return r(be.openGuideModal())}},o.createElement("span",{className:"fal fa-question-circle fa-fw"}),o.createElement("span",{className:"d-none d-md-inline-block ml-2"},s("web.shared.challenge.ide"))),o.createElement(Be,null))};(0,t(23594).Z)(),function(e){var n,t,r,s,a={hasWebView:e.ide_settings.has_web_view,htmlReadme:e.ide_settings.readme,filesToOpen:e.ide_settings.files_to_open,instanceId:e.run.instance_id,runId:e.run.id,member:e.member,run:e.run,finishUrl:e.finish_url,nextUrl:e.next_url,exercise:e.exercise,linterConfig:e.ide_settings.linter_config},i=(0,u.xC)({reducer:ge,preloadedState:{run:e.run,solution:{removedParts:e.removed_parts,isModalOpened:!1,reviewLocation:null,reviewState:"canSend",fetching:!1},guide:{isModalOpened:null!=(n=null==e||null==(t=e.ideOnboarding)?void 0:t.isFirstVisit)&&n,isFirstVisit:null!=(r=null==e||null==(s=e.ideOnboarding)?void 0:s.isFirstVisit)&&r}}}),d=document.getElementById("hexlet-challenge-ide"),m=document.getElementById("hexlet-ide-control-menu"),f=document.getElementById("hexlet-ide-buttons"),p=document.getElementById("hexlet-challenge-solution"),h=document.getElementById("hexlet-challenge-ide-guide"),v=o.createElement(c.zt,{store:i},o.createElement(_e,{finishUrl:a.finishUrl,exercise:a.exercise,nextUrl:a.nextUrl,htmlReadme:a.htmlReadme,filesToOpen:a.filesToOpen,linterConfig:a.linterConfig})),g=o.createElement(c.zt,{store:i},o.createElement(Se,{nextUrl:a.nextUrl}));if(l.render(v,d),l.render(g,m),f&&a.hasWebView){var b=o.createElement(c.zt,{store:i},o.createElement(ye,null));l.render(b,f)}if(p){var x=o.createElement(Ie.Provider,{value:{exerciseKind:a.exercise.kind}},o.createElement(c.zt,{store:i},o.createElement(Oe,null)));l.render(x,p)}if(h){var w=o.createElement(c.zt,{store:i},o.createElement(Ke,null));l.render(w,h)}}(s()),i()("#hexlet-ide-focus").on("click",(function(){var e=i()("#hexlet-ide-iframe iframe");setTimeout((function(){return e.focus()}),500)}))},85924:function(e,n,t){var r=t(30837),s=t(99622),a=t(75037),i=t(6140),o=t(10769),l=t(82532),c=t(47271),u=t(34085),d=t(35010),m=t(40836),f=t(61042),p=(t(85241),{javascript:s.Z,ruby:c.Z,shell:i.Z,php:o.Z,java:l.Z,sql:u.Z,python:a.Z,scss:d.Z,css:m.Z,html:f.Z,xml:f.Z});Object.keys(p).forEach((function(e){return r.Z.registerLanguage(e,p[e])})),n.Z=r.Z},53812:function(e,n,t){t.d(n,{I:function(){return s}});var r={hexletHowToDebugHelpUrl:"https://help.hexlet.io/ru/articles/111500-kak-nayti-oshibki-v-kode",hexletAskQuestionsHelpUrl:"https://help.hexlet.io/ru/articles/111495-kak-pravilno-zadavat-voprosy",hexletCodeReviewHelpUrl:"https://help.hexlet.io/ru/articles/111135-kod-revyu",hexletFaqHelpUrl:"https://help.hexlet.io/ru/articles/111490-ne-mogu-vypolnit-praktiku",hexletMarkdownGuideUrl:"https://guides.hexlet.io/markdown/",googleDocsUrl:"https://docs.google.com",corsProxyUrl:"https://hexlet-corsanywhere.herokuapp.com"},s=function(e){var n=new URL("/forms/d/e/"+e+"/formResponse",r.googleDocsUrl);return n.searchParams.set("embedded","true"),n};n.Z=r},49429:function(e,n,t){e.exports=t.p+"media/images/ide_onboarding_screen_1_1x.png-2a20ef309c5bbe80e63b.png"},8536:function(e,n,t){e.exports=t.p+"media/images/ide_onboarding_screen_1_2x.png-3f0df28c3c8329ec8bdc.png"},36059:function(e,n,t){e.exports=t.p+"media/images/ide_onboarding_screen_2_1x.png-1ec650817a981ada4b7e.png"},20398:function(e,n,t){e.exports=t.p+"media/images/ide_onboarding_screen_2_2x.png-6cad002ac6115b1f5780.png"},50866:function(e,n,t){e.exports=t.p+"media/images/ide_onboarding_screen_3_1x.png-4ed2135d04891fed1371.png"},5359:function(e,n,t){e.exports=t.p+"media/images/ide_onboarding_screen_3_2x.png-bd5be07e0d3a0cd1f9cb.png"},8810:function(e){e.exports=gon}},function(e){e.O(0,[935,250,76,860,249,690,14,466,172,796,512,422,283,594],(function(){return n=96431,e(e.s=n);var n}));e.O()}]);
//# sourceMappingURL=challenge-442e35ad4ea0a0584163.js.map